<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

    <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>

    <link rel="stylesheet" href="swiper.css">
    <link rel="stylesheet" href="style_all_genres.css">

</head>

<body>

    <div #swiperRef="" class="swiper mySwiper">
        <div class="swiper-wrapper" id="add-swiper1">
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>
    <div #swiperRef="" class="swiper mySwiper">
        <div class="swiper-wrapper" id="add-swiper2">
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <!-- Initialize Swiper -->
    <script>
        var swiper = new Swiper(".mySwiper", {
            slidesPerView: 8,
            spaceBetween: 8,
            slidesPerGroup: 8,
            pagination: {
                el: ".swiper-pagination",
                type: "fraction",
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });
    </script>

    <script>
        let requestURL = 'asia.json';
        let request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (request.readyState == 4 && request.status == 200) {
                dataReportStatus(JSON.parse(request.responseText));
            }
        };
        request.open("GET", requestURL, true);
        request.send();

        function dataReportStatus(data) {
            for (var i = 0; i < data.Top_Box_Office.length; i++) {
                var info = "";
                for (var j = 0; j < data.Top_Box_Office[i].Type.length; j++) {
                    info += data.Top_Box_Office[i].Type[j]
                    if (j != data.Top_Box_Office[i].Type.length - 1) {
                        info += `, `;
                    }
                }

                var html = createElementFromHTML(`<div class="swiper-slide">
                    <div class="inerType">
                        <a href="${data.Top_Box_Office[i].Trailer}" target="_blank">
                            <div class="img_position_swiper"></div>
                        </a>
                        <div class="card card-img-container shadeType">
                            <img src="${data.Top_Box_Office[i].Image}" alt="">
                        </div>
                        <div class="textType">
                            <span class="titleName">${data.Top_Box_Office[i].Name}</span>
                            <div class="sub-info">
                                <span>${info}</span>
                            </div>
                            <div class="movieDescription">
                                ${data.Top_Box_Office[i].Description}
                            </div>
                            <div class="addToWatchList" title="เพิ่มในรายการรับชม">
                                <img class="plusIcon" src="https://cdn-icons-png.flaticon.com/512/1828/1828819.png" alt="">
                                <span> เพิ่มในรายการรับชม</span>
                            </div>
                        </div>
                    </div>
                </div>`);
                document.getElementById("add-swiper1").appendChild(html);
            }

            for (var i = 0; i < data.Top_Box_Office.length; i++) {
                var info = "";
                for (var j = 0; j < data.Top_Box_Office[i].Type.length; j++) {
                    info += data.Top_Box_Office[i].Type[j]
                    if (j != data.Top_Box_Office[i].Type.length - 1) {
                        info += `, `;
                    }
                }
                var html = createElementFromHTML(`<div class="swiper-slide">
                    <div class="inerType">
                        <a href="${data.Top_Box_Office[i].Trailer}" target="_blank">
                            <div class="img_position_swiper"></div>
                        </a>
                        <div class="card card-img-container shadeType">
                            <img src="${data.Top_Box_Office[i].Image}" alt="">
                        </div>
                        <div class="textType">
                            <span class="titleName">${data.Top_Box_Office[i].Name}</span>
                            <div class="sub-info">
                                <span>${info}</span>
                            </div>
                            <div class="movieDescription">
                                ${data.Top_Box_Office[i].Description}
                            </div>
                            <div class="addToWatchList" title="เพิ่มในรายการรับชม">
                                <img class="plusIcon" src="https://cdn-icons-png.flaticon.com/512/1828/1828819.png" alt="">
                                <span> เพิ่มในรายการรับชม</span>
                            </div>
                        </div>
                    </div>
                </div>`);
                document.getElementById("add-swiper2").appendChild(html);
            }
        }

        function createElementFromHTML(htmlString) {
            var div = document.createElement('div');
            div.innerHTML = htmlString.trim();
            // Change this to div.childNodes to support multiple top-level nodes
            return div.firstChild;
        }
    </script>


</body>

</html>